<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title> Expérience en cours ... </title>
    <link rel="stylesheet" href="{{ asset('css/styles_exp.scss') }}">
</head>

<div id='mega-grid'>
    <section name="Explication" id='presentation'>
        <div id='presentation-content' style='flex-direction:column;'>
            <h> Une mystérieuse épidémie a fait iruption ...  A vous de faire le nécessaire pour minimiser le nombre d'infecté ...</h>
            <p> Aujourd'hui est le  {{etat_avant.T}} ième jour </p>
        </div>
    </section>

    <section id="control-panel">
                {{form_start(formExp)}}
        <div id='arbre' >
        </div>
        <div id='rectangles'>
            <div id='rectangle1' >
                <rect id='rect1' height='50 %' width='100 %'> Région 11 </rect>
            </div>
            <div id='rectangle2' >
                <rect id='rect2' height='50 %' width='100 %'> Région 12 </rect>
            </div>
            <div id='rectangle3' >
                <rect id='rect3' height='50 %' width='100 %'> Région 21 </rect>
            </div>
            <div id='rectangle4' >
                <rect id='rect4' height='50 %' width='100 %'> Région 22 </rect>
            </div>
        </div>
                  {{form_end(formExp)}}
    </section>
    <section id="display">
        <div id='display1'>
            <h id='title-card'> Données région 11  : </h>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite1}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule1}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP1}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier1 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc1}}</li>
                      {% endif %}
            </ul>
        </div>
        <div id='display2'>
            <h id='title-card'> Données région 12  : </h>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite2}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule2}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP2}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier2 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc2}}</li>
                      {% endif %}
            </ul>
            
        </div>
        <div id='display3'>
            <h id='title-card'> Données région 21 : </h>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite3}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule3}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP3}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier3 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc3}}</li>
                      {% endif %}
            </ul>
            
        </div>
        <div id='display4'>
            <h id='title-card'> Données région 22 </h>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite4}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule4}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP4}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier4 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc4}}</li>
                      {% endif %}
            </ul>
            
        </div>
    </section>


<script>

  // On initialise les sélection des élèments car ceux ci seront permanents 
  rect1 = document.getElementById('rect1');
  rect2 = document.getElementById('rect2');
  rect3 = document.getElementById('rect3');
  rect4 = document.getElementById('rect4');


  sliderregions = document.getElementById('form_Test11');
  sliderregion1 = document.getElementById('form_Test12');
  sliderregion2 = document.getElementById('form_Test21');

  
  function actualisationvalue (event){
      sliderregions = document.getElementById('form_Test11');

      // on récupère la valeur de chaque slider 
      valueregions = sliderregions.value ;
      valueregion1 = sliderregion1.value;
      valueregion2 = sliderregion2.value;


      // On calcule ce que ce la représente pour les rectangles 
      region11 = (100- valueregions) * valueregion1 / 10000;
      region12 = (100- valueregions) *(100- valueregion1)/ 10000;
      region21 = valueregions * valueregion2 / 10000;
      region22 = valueregions * (100-valueregion2) / 10000;

      region11 = (region11 * 100).toString();
      region12 = (region12 * 100).toString();
      region21 = (region21 * 100).toString();
      region22 = (region22 * 100).toString();

      rect1.style.width = region11 + '%' ; 
      rect2.style.width = region12 + '%' ; 
      rect3.style.width = region21 + '%' ; 
      rect4.style.width = region22 + '%' ; 
  }
  sliderregions.onchange = actualisationvalue ;
  sliderregion1.onchange = actualisationvalue ; 
  sliderregion2.onchange = actualisationvalue ; 
</script>
</div>
