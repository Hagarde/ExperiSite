<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title> Expérience en cours ... </title>
    <link rel="stylesheet" href="{{ asset('css/styles_exp.scss') }}">
    <link rel="stylesheet" href="https://bootswatch.com/4/flatly/bootstrap.min.css">
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary" >
  <div class="container-fluid">
    <a class="navbar-brand" href="/"> ExpériSite</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarColor01">
      <ul class="navbar-nav me-auto">
        <li class="nav-item active">
                        <a class="nav-link" href="{{path('home')}}">Acceuil
                        </a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="/exp/exp_form/0"> Jouer</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="{{path('resultat')}}"> Résultats</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{path('about_us')}}">A propos de nous et de l'expérience ! </a>
                    </li>

    </div>
  </div>
</nav>

<div id='mega-grid'>
    <section name="Explication" id='presentation'>
        <div id='presentation-content' style='flex-direction:column;'>
            <h2> Une mystérieuse épidémie a fait iruption ...  A vous de faire le nécessaire pour minimiser le nombre d'infecté ...</h2>
            <p> Aujourd'hui est le  {{etat_avant.T}} ième jour </p>
        </div>
    </section>

    <section id="control-panel">
                
        <div id='arbre' >
            <div id='pres-control-panel'>
                <h3> Répartition des test en fonction des régions et populations </h3>
            </div>

            <div id='arbre-haut' style='padding: 25px;'>
                {{form_start(formExp)}}
                <h6> Région1 </h6>
                {{form_widget(formExp.Test11)}}
                <h6> Région2 </h6>
            </div>
            <div id='arbre-bas' style='flex-direction:row;padding: 30px;'>
                <h6> Jeune </h6>
                {{form_widget(formExp.Test12)}}
                <h6> Vieux  </h6>
                <h6> Jeune </h6>
                {{form_widget(formExp.Test21)}}
                <h> Vieux </h>
                
            </div>
            <div id='button-submit' >
                <button type='submit' class="btn btn-primary" > Soumettre</button>
            </div>
            {{form_end(formExp)}}
            
        </div>

        <div id='rectangles' style='flex-direction: row;'>
            
            <div id='area1' style='flex-direction: column;' >
                <svg width="25%" height="100%">
                    <rect width="25%" height="100%"  id='rect1' style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
                </svg>
                <h> Région 11 </h>
            </div>
            <div id='area2' style='flex-direction: column;' >
                <svg width="25%" height="100%">
                    <rect width="25%" height="100%" id='rect2' style="fill:rgb(100,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
                </svg>
                <h> Région 12 </h>
            </div>
            <div id='area3' style='flex-direction: column;'>
                <svg width="25%" height="100%">
                    <rect width="25%" height="100%" id='rect3' style="fill:rgb(0,200,255);stroke-width:3;stroke:rgb(0,0,0)" />
                </svg>
                <h> Région 21 </h>
            </div>
            <div id='area4' style='flex-direction: column;'>
                <svg width="25%" height="100%">
                    <rect width="25%" height="100%" id='rect4' style="fill:rgb(0,200,0);stroke-width:3;stroke:rgb(0,0,0)" />
                </svg>
                <h> Région 22 </h>
            </div>
        </div>
                  
    </section>
    <section id="display">
        <div id='display1' class='floating'>
            <h3 id='title-card'> Données région 11  : </h3>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite1}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule1}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP1}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier1 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc1}}</li>
                      {% endif %}
            </ul>
        </div>
        <div id='display2' class='floating'>
            <h3 id='title-card'> Données région 12  : </h3>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite2}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule2}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP2}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier2 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc2}}</li>
                      {% endif %}
            </ul>
            
        </div>
        <div id='display3' class='floating'>
            <h3 id='title-card'> Données région 21 : </h3>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite3}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule3}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP3}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier3 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc3}}</li>
                      {% endif %}
            </ul>
            
        </div>
        <div id='display4' class='floating'>
            <h3 id='title-card'> Données région 22 </h3>
            <ul class="list-group list-group-flush" >
                      <li class="list-group-item"> Population : 10 000 </li>
                      <li class="list-group-item"> Taux de positivité : {{positivite4}} </li>
                      <li class="list-group-item"> Nombre de cas cumulé(s) : {{cas_cumule4}}</li>
                      <li class="list-group-item"> Nouveau cas détecté(s) : {{newP4}} </li>
                      <li class="list-group-item"> Nombre de test la veille : {{ testhier4 }}</li>
                            {# Ici il faudrait indiquer l'influence du form sur le nombre de test #}

                      {% if acc %}
                      <li class="list-group-item"> Indice d'accélération : {{acc4}}</li>
                      {% endif %}
            </ul>
            
        </div>
    </section>

</div>

</body>

<script>

  // On initialise les sélection des élèments car ceux ci seront permanents 
  rect1 = document.getElementById('rect1');
  rect2 = document.getElementById('rect2');
  rect3 = document.getElementById('rect3');
  rect4 = document.getElementById('rect4');


  sliderregions = document.getElementById('form_Test11');
  sliderregion1 = document.getElementById('form_Test12');
  sliderregion2 = document.getElementById('form_Test21');

  
  function actualisationvalue (event){
      sliderregions = document.getElementById('form_Test11');

      // on récupère la valeur de chaque slider 
      valueregions = sliderregions.value ;
      valueregion1 = sliderregion1.value;
      valueregion2 = sliderregion2.value;


      // On calcule ce que ce la représente pour les rectangles 
      region11 = (100- valueregions) * (100-valueregion1) / 10000;
      region12 = (100- valueregions) *valueregion1/ 10000;
      region21 = valueregions * (100-valueregion2 )/ 10000;
      region22 = valueregions * valueregion2 / 10000;

      region11 = (region11 * 100).toString();
      region12 = (region12 * 100).toString();
      region21 = (region21 * 100).toString();
      region22 = (region22 * 100).toString();

      rect1.style.height = region11*2 + '%' ; 
      rect2.style.height = region12*2 + '%' ; 
      rect3.style.height = region21*2 + '%' ; 
      rect4.style.height = region22*2 + '%' ; 
  }
  sliderregions.onchange = actualisationvalue ;
  sliderregion1.onchange = actualisationvalue ; 
  sliderregion2.onchange = actualisationvalue ; 
</script>


